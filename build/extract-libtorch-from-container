#!/bin/bash

# Extract libtorch from our docker container imqs/libtorch.
# This is just a convenient way to get a libtorch build environment on your own machine

rm -rf libtorch-extract
docker run --rm -v `pwd`/libtorch-extract:/libtorch-extract imqs/libtorch cp -r /usr/local/libtorch/. /libtorch-extract
sudo chown -R $USER:$USER libtorch-extract
if [ "$1" == "--justdoit" ]; then
	sudo rm -r /usr/local/libtorch
	sudo cp -r libtorch-extract/. /usr/local/libtorch
	rm -rf libtorch-extract
else
	echo "LibTorch has been extracted to 'libtorch-extract'."
	echo "You probably want to copy it to /usr/local/libtorch now."
	echo "  sudo cp -r libtorch-extract/. /usr/local/libtorch"
fi
